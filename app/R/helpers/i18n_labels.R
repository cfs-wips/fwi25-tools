help_fr <- "<title>IFM25 ‚Ä¢ Indice canadien de danger m√©t√©orologique des feux de for√™t (horaire) ‚Äî Aide</title> <link href=\"gc_custom_style.css\" rel=\"stylesheet\"/> <style>   .toc { background: #fff; border: 1px solid var(--gcds-border-default); padding: .75rem 1rem; border-radius: .5rem; }   .gc-card { background: #fff; border: 1px solid var(--gcds-border-default); padding: 1rem; border-radius: .5rem; margin-bottom: 1rem; transition: box-shadow 0.3s ease; }   .gc-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.08); }   .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1rem; }   table.coeff { width:100%; border-collapse: collapse; margin-top:.5rem; }   table.coeff th, table.coeff td { border:1px solid var(--gcds-border-default); padding:.35rem; text-align:left; }   table.coeff th { background: var(--gcds-bg-light); }   svg { width: 100%; height: auto; }  /* Ligne ic√¥ne + libell√© */   .output-heading {     display: inline-flex;     align-items: center;     gap: 0.5rem;                      /* espace entre l‚Äôic√¥ne et le texte */     font-size: 1rem;     margin-bottom: 0.35rem;   }   .output-heading .icon {     font-size: 1.2rem;     line-height: 1;     color: var(--gcds-bg-primary, #26374A);  /* Couleur principale GC en secours */   }   /* Optionnel : assurer que le paragraphe s‚Äôaffiche bien sous la ligne de titre */   .gc-card p {     margin-top: 0.25rem;     margin-bottom: 0;   } </style> <header> <h1 aria-level=\"1\" class=\"gc-page-title\" role=\"heading\">IFM25 ‚Ä¢ Indice canadien de danger m√©t√©orologique des feux de for√™t (horaire)</h1> <p class=\"muted\">Aide et guide de l‚Äôutilisateur ‚Äî calculer l‚ÄôIFM horaire (IFM25) √† partir de vos donn√©es m√©t√©orologiques</p> </header> <main> <nav aria-label=\"Table des mati√®res\" class=\"toc\"> <strong>Sur cette page</strong> <ol> <li><a href=\"#overview\">Aper√ßu, objectif et hypoth√®ses</a></li> <li><a href=\"#workflow\">Flux de travail : √©tapes et r√©sultats</a></li> <li><a href=\"#process\">Processus</a></li> <li><a href=\"#models\">D√©tails de mod√©lisation et hypoth√®ses</a></li> <li><a href=\"#diagram\">Diagram du processus</a></li> <li><a href=\"#policy\">√ânonc√© du SCT et de Copilot</a></li> <li><a href=\"#support\">Support et liens</a></li> <li><a href=\"#references\">R√©f√©rences</a></li> </ol> </nav> <section id=\"overview\"> <h2 aria-level=\"2\" role=\"heading\">1) Aper√ßu, objectif et hypoth√®ses</h2> <div class=\"gc-card\"> <p><strong>IFM25</strong> convertit vos donn√©es m√©t√©orologiques en valeurs <em>horaires</em> de l‚ÄôIndice canadien de danger m√©t√©orologique des feux de for√™t afin de soutenir les tableaux op√©rationnels, les graphiques et les analyses en aval. T√©l√©versez un fichier CSV, configurez les options et ex√©cutez le moteur horaire; l‚Äôapplication renvoie les r√©sultats IFM25 et, en option, les r√©sum√©s quotidiens IFM87.</p> <h3 aria-level=\"3\" role=\"heading\">Ce que l‚Äôapplication peut et ne peut pas faire</h3> <ul> <li>Accepte soit des donn√©es m√©t√©orologiques <strong>horaires</strong>, soit des donn√©es <strong>quotidiennes (midi/12 h)</strong>. Si vous fournissez des donn√©es quotidiennes, nous d√©rivons statistiquement les valeurs min/max, puis nous synth√©tisons une s√©rie horaire avant de calculer le IFM25.</li> <li>Respecte votre <strong>politique temporelle</strong> : heure civile (avec DST) ou d√©calage standard fixe; cela affecte les horodatages affich√©s dans les tableaux, les axes des graphiques et les termes solaires.</li> <li>Fournit le mappage, les options de fuseau horaire/DST, les filtres et les codes initiaux; les r√©sultats pr√©c√©dents sont masqu√©s jusqu‚Äô√† ce que vous appuyiez sur <em>Ex√©cuter HIFM</em> apr√®s chaque t√©l√©versement.</li> </ul> <h3 aria-level=\"3\" role=\"heading\">Limitations</h3> <ul> <li>Suppose une granularit√© horaire une fois convertie; les entr√©es sous-horaires sont agr√©g√©es/ignor√©es en amont.</li> <li>Les calculs solaires d√©pendent de la qualit√© des coordonn√©es latitude/longitude et de votre politique temporelle choisie (DST ou standard).</li> </ul> </div> </section> <section id=\"workflow\"> <h2 aria-level=\"2\" role=\"heading\">2) Flux de travail : √©tapes et r√©sultats</h2> <h3 aria-level=\"3\" role=\"heading\">√âtapes</h3> <div class=\"grid\"> <div class=\"gc-card\"><h3 aria-level=\"3\" role=\"heading\">T√©l√©verser et associer</h3><p>T√©l√©versez un fichier CSV et associez les champs requis. Optionnel : ID de station et lat/lon pour d√©duire le fuseau horaire.</p></div> <div class=\"gc-card\"><h3 aria-level=\"3\" role=\"heading\">Options</h3><p>S√©lectionnez la politique de fuseau horaire/heure avanc√©e, appliquez des filtres et d√©finissez les codes initiaux.</p></div> <div class=\"gc-card\"><h3 aria-level=\"3\" role=\"heading\">Ex√©cuter HIFM</h3><p>Appuyez sur <em>Ex√©cuter HIFM</em> pour calculer le IFM25 horaire. Les nouveaux t√©l√©versements r√©initialisent les r√©sultats pr√©c√©dents.</p></div> </div> <h3 aria-level=\"3\" role=\"heading\">R√©sultats</h3> <div class=\"grid\"> <div class=\"gc-card\"> <div class=\"output-heading\"> <span aria-hidden=\"true\" class=\"icon\"><span aria-label=\"Table d‚Äôentr√©e\" role=\"img\">üì•</span></span> <strong>Table d‚Äôentr√©e</strong> <span aria-hidden=\"true\" class=\"icon\"><span aria-label=\"Table d‚Äôentr√©e\" role=\"img\">üì•</span></span> </div> <p>Affiche les donn√©es m√©t√©orologiques associ√©es.</p> </div> <div class=\"gc-card\"> <div class=\"output-heading\"> <span aria-hidden=\"true\" class=\"icon\"><span aria-label=\"Tableau de donn√©es\" role=\"img\">üìä</span></span> <strong>Table de sortie</strong> <span aria-hidden=\"true\" class=\"icon\"><span aria-label=\"Tableau de donn√©es\" role=\"img\">üìä</span></span> </div> <p>Valeurs horaires IFM25 et r√©sum√© quotidien IFM87 optionnel.</p> </div> <div class=\"gc-card\"> <div class=\"output-heading\"> <span aria-hidden=\"true\" class=\"icon\"><span aria-label=\"Graphique\" role=\"img\">üìà</span></span> <strong>Graphiques</strong> <span aria-hidden=\"true\" class=\"icon\"><span aria-label=\"Graphique\" role=\"img\">üìà</span></span> </div> <p>Visualisez les codes et indices horaires.</p> </div> <div class=\"gc-card\"> <div class=\"output-heading\"> <span aria-hidden=\"true\" class=\"icon\">üìù</span> <strong>Journaux</strong> <span aria-hidden=\"true\" class=\"icon\">üìù</span> </div> <p>Messages de traitement et avertissements √©ventuels.</p> </div> </div> </section> <section id=\"process\"> <h2 aria-level=\"2\" role=\"heading\">3) Processus : t√©l√©versement ‚Üí mappage ‚Üí options ‚Üí ex√©cution ‚Üí r√©sultats</h2> <div class=\"gc-card\"> <p><strong>Deux approches :</strong> L‚Äôentr√©e horaire calcule directement IFM25. L‚Äôentr√©e quotidienne estime les valeurs min/max, puis synth√©tise les s√©ries horaires via Becks &amp; Trevitt avant de calculer IFM25.</p> </div> </section>  </section> <section id=\"models\"> <h2 aria-level=\"2\" role=\"heading\">4) D√©tails de mod√©lisation quotidien‚Üíhoraire et hypoth√®ses</h2> <div class=\"gc-card\"> <h3 aria-level=\"3\" role=\"heading\">4.1 Quotidien ‚Üí Min/Max (mod√®le statistique)</h3> <p>Lorsqu‚Äôon dispose uniquement des valeurs quotidiennes de midi (<code>temp</code>, <code>rh</code>, <code>ws</code>, <code>prec</code>), nous calculons une plage de temp√©rature <code>temp_range = 17 ‚àí 0.16¬∑RH_noon + 0.22¬∑T_noon</code>. Les maxima/minima quotidiens sont alors : <code>T_max = T_noon + {1 si temp_range ‚â§ 2 sinon 2}</code>, et <code>T_min = (T_noon ‚àí 1) si temp_range ‚â§ 2 sinon (T_max ‚àí temp_range)</code>.</p> <p>Les extr√™mes d‚Äôhumidit√© relative sont appari√©s de sorte que l‚Äôhumidit√© minimale co√Øncide avec la temp√©rature maximale et vice versa, en utilisant un param√®tre <code>q</code> d√©riv√© des conditions de midi et une fonction <code>find_rh(q, T)</code>, born√©e entre 0 et 100 %. Les extr√™mes de vent sont estim√©s comme <code>WS_min = 0.15¬∑WS_noon</code> et <code>WS_max = 1.25¬∑WS_noon</code>.</p> <p class=\"muted small\">Remarque : <code>find_q</code> et <code>find_rh</code> sont impl√©ment√©s dans le code utilitaire de l‚Äôapplication; ils relient les conditions de midi √† la courbe diurne d‚Äôhumidit√©.</p> <h3 aria-level=\"3\" role=\"heading\">4.2 Min/Max ‚Üí Horaire (synth√®se Becks &amp; Trevitt)</h3> <p>Les profils horaires de temp√©rature, de vent et d‚Äôhumidit√© sont g√©n√©r√©s √† l‚Äôaide d‚Äôune courbe en deux phases par jour : une phase <em>ascendante</em> peu apr√®s le lever du soleil jusqu‚Äô√† midi solaire, suivie d‚Äôune phase <em>descendante</em> du coucher du soleil jusqu‚Äôau minimum du jour suivant.</p> <ul> <li><strong>Calendrier solaire :</strong> Le midi solaire est d√©fini comme le point m√©dian entre le lever et le coucher du soleil chaque jour; ces horaires proviennent de la routine solaire de l‚Äôapplication.</li> <li><strong>Coefficients (par d√©faut) :</strong> <ul> <li>Temp√©rature : Œ± = 0.0, Œ≤ = 2.75, Œ≥ = ‚àí1.9</li> <li>Humidit√© relative (forme oppos√©e) : Œ± = 0.25, Œ≤ = 2.75, Œ≥ = ‚àí2.0</li> <li>Vent : Œ± = 1.0, Œ≤ = 1.5, Œ≥ = ‚àí1.3</li> </ul> </li> <li><strong>Phase ascendante (jour) :</strong> les valeurs progressent du minimum vers le maximum en utilisant une demi-onde sinuso√Ødale entre <code>TIME_MIN = SUNRISE + Œ±</code> et <code>TIME_MAX = SOLARNOON + Œ≤</code>.</li> <li><strong>Phase descendante (soir√©e‚Äìnuit) :</strong> les valeurs d√©croissent exponentiellement √† partir de la valeur √† <code>change_at = SUNSET</code> vers le minimum du jour suivant en utilisant Œ≥.</li> <li><strong>Forme d‚Äôhumidit√© :</strong> le mod√®le op√®re sur <code>RH_OPP = 1 ‚àí RH_fraction</code>, puis reconvertit en pourcentage d‚Äôhumidit√© relative (0‚Äì100 %).</li> <li><strong>R√©partition des pr√©cipitations :</strong> les pr√©cipitations quotidiennes sont plac√©es √† <code>07:00</code> heure locale par d√©faut.</li> <li><strong>Politique de fuseau horaire :</strong> les horodatages utilisent votre politique choisie (heure civile/DST ou d√©calage standard fixe); les graphiques et tableaux refl√®tent ce choix.</li> </ul> </div> </section> <section id=\"diagram\"> <h2 aria-level=\"2\" role=\"heading\">5) Flux de processus (diagramme vertical)</h2> <figure>  <svg aria-labelledby=\"title desc\" role=\"img\" viewbox=\"0 0 1200 800\" preserveAspectRatio=\"xMidYMid meet\"> <title id=\"title\">Flux de processus IFM25</title> <desc id=\"desc\">Flux vertical ramifi√© montrant les chemins horaires et quotidiens fusionnant avant les r√©sultats, avec calcul optionnel du IFM87.</desc> <style><![CDATA[   .box { fill:#fff; stroke:#7D828B; stroke-width:1.5; rx:6; }   .hourly { fill:#e6f4ea; }   .daily { fill:#eaf0f8; }   .merge { fill:#f9f9f9; }   .optional { fill:#f0f0f0; stroke-dasharray:4; }   .label { font:14px sans-serif; fill:#333; }   .arrow { stroke:#333; stroke-width:1.5; marker-end:url(#arrowhead); } ]]></style> <defs> <marker id=\"arrowhead\" markerHeight=\"8\" markerUnits=\"strokeWidth\" markerWidth=\"8\" orient=\"auto\" refX=\"8\" refY=\"5\" viewBox=\"0 0 10 10\"> <path d=\"M0,0 L10,5 L0,10 Z\" fill=\"#333\"></path> </marker> </defs> <!-- L√©gende --> <rect class=\"hourly\" height=\"20\" stroke=\"#7D828B\" width=\"20\" x=\"20\" y=\"10\"></rect><text class=\"label\" x=\"50\" y=\"25\">Chemin horaire</text> <rect class=\"daily\" height=\"20\" stroke=\"#7D828B\" width=\"20\" x=\"180\" y=\"10\"></rect><text class=\"label\" x=\"210\" y=\"25\">Chemin quotidien</text> <rect class=\"merge\" height=\"20\" stroke=\"#7D828B\" width=\"20\" x=\"340\" y=\"10\"></rect><text class=\"label\" x=\"370\" y=\"25\">Fusion</text> <rect class=\"optional\" height=\"20\" stroke=\"#7D828B\" width=\"20\" x=\"480\" y=\"10\"></rect><text class=\"label\" x=\"510\" y=\"25\">Optionnel</text> <!-- Flux --> <!-- T√©l√©versement --> <rect class=\"box merge\" height=\"50\" width=\"200\" x=\"200\" y=\"60\"><title>T√©l√©verser votre fichier CSV</title></rect> <text class=\"label\" x=\"220\" y=\"90\">T√©l√©verser CSV</text> <line class=\"arrow\" x1=\"300\" x2=\"300\" y1=\"110\" y2=\"160\"></line> <!-- Mappage & Options --> <rect class=\"box merge\" height=\"50\" width=\"200\" x=\"200\" y=\"160\"><title>Mapper les colonnes et d√©finir les options</title></rect> <text class=\"label\" x=\"210\" y=\"190\">Mappage & Options</text> <line class=\"arrow\" x1=\"300\" x2=\"300\" y1=\"210\" y2=\"260\"></line> <!-- Branche --> <line class=\"arrow\" x1=\"300\" x2=\"150\" y1=\"260\" y2=\"320\"></line> <line class=\"arrow\" x1=\"300\" x2=\"450\" y1=\"260\" y2=\"320\"></line> <!-- Chemin horaire --> <rect class=\"box hourly\" height=\"50\" width=\"150\" x=\"100\" y=\"320\"><title>Entr√©e m√©t√©o horaire</title></rect> <text class=\"label\" x=\"110\" y=\"350\">M√©t√©o horaire</text> <line class=\"arrow\" x1=\"175\" x2=\"300\" y1=\"370\" y2=\"620\"></line> <!-- Chemin quotidien --> <rect class=\"box daily\" height=\"50\" width=\"150\" x=\"400\" y=\"320\"><title>Entr√©e m√©t√©o quotidienne</title></rect> <text class=\"label\" x=\"410\" y=\"350\">M√©t√©o quotidienne</text> <line class=\"arrow\" x1=\"475\" x2=\"475\" y1=\"370\" y2=\"420\"></line> <rect class=\"box daily\" height=\"50\" width=\"150\" x=\"400\" y=\"420\"><title>Convertir quotidien en min/max</title></rect> <text class=\"label\" x=\"410\" y=\"450\">Min/Max statistique</text> <line class=\"arrow\" x1=\"475\" x2=\"475\" y1=\"470\" y2=\"520\"></line> <rect class=\"box daily\" height=\"50\" width=\"150\" x=\"400\" y=\"520\"><title>Synth√©tiser horaire avec Becks & Trevitt</title></rect> <text class=\"label\" x=\"410\" y=\"550\">Horaire Becks & Trevitt</text> <line class=\"arrow\" x1=\"475\" x2=\"300\" y1=\"570\" y2=\"620\"></line> <!-- Fusion --> <rect class=\"box merge\" height=\"50\" width=\"200\" x=\"200\" y=\"620\"><title>Ex√©cuter le moteur IFM horaire</title></rect> <text class=\"label\" x=\"220\" y=\"650\">Ex√©cuter HIFM</text> <!-- Optionnel IFM87 --> <rect class=\"box optional\" height=\"50\" width=\"180\" x=\"420\" y=\"620\"><title>Calculer le r√©sum√© quotidien IFM87</title></rect> <text class=\"label\" x=\"430\" y=\"650\">Optionnel : Calculer IFM87</text> <line class=\"arrow\" x1=\"420\" x2=\"400\" y1=\"645\" y2=\"645\"></line> <!-- R√©sultats --> <line class=\"arrow\" x1=\"300\" x2=\"300\" y1=\"670\" y2=\"720\"></line> <rect class=\"box merge\" height=\"50\" width=\"200\" x=\"200\" y=\"720\"><title>Afficher les r√©sultats : tableaux, graphiques, journaux</title></rect> <text class=\"label\" x=\"220\" y=\"750\">R√©sultats</text> </svg>  </figure> </section> <section id=\"policy\"> <h2 aria-level=\"2\" role=\"heading\">6) D√©claration du SCT et de Copilot</h2> <div class=\"gc-card\"> <p>Cette application peut utiliser Microsoft Copilot pour aider √† la traduction et √† la g√©n√©ration de code. L‚Äôutilisation respecte les <a href=\"https://www.tbs-sct.canada.ca/pol/doc-eng.aspx?id=32592\", target=\"_blank\">Directive sur la prise de d√©cision automatis√©e</a> et le <a href=\"https://www.canada.ca/en/government/system/digital-government/digital-government-innovations/responsible-use-ai/guide-use-generative-ai.html\", target=\"_blank\">Guide sur l‚Äôutilisation de l‚Äôintelligence artificielle g√©n√©rative</a>. Tous les r√©sultats assist√©s par IA sont examin√©s par des humains avant utilisation op√©rationnelle.</p> </div> </section> <section id=\"support\"> <h2 aria-level=\"2\" role=\"heading\">7) Support et liens</h2> <p> <ul> <li><a href=\"https://github.com/cfs-wips/fwi25-tools/issues\" target=\"_blank\">Signaler des probl√®mes</a><br/></li> <li><a href=\"https://github.com/nrcan-cfs-fire/cffdrs-ng/\" target=\"_blank\">PG-MCEDIF IFM25</a><br/></li> <li><a href=\"https://cffdrs.github.io/website_en/\" target=\"_blank\">PG-MCEDIF IFM25</a><br/></li> </ul> </p> </section> <section id=\"references\"> <h2 aria-level=\"2\" role=\"heading\">8)R√©f√©rences</h2> <ul> <li><a href=\"https://doi.org/10.1139/x89-120\">Beck, T.A., &amp; Trevitt, A.C. (1989). Mod√©lisation de la variation diurne des variables m√©t√©orologiques pour l‚Äô√©valuation du danger d‚Äôincendie. <em>Revue canadienne de recherche foresti√®re</em>.</a></li> <li><a href=\"https://doi.org/10.4095/st000101\">Groupe de travail sur les dangers d‚Äôincendies du Service canadien des for√™ts (2025). Mise √† jour 2025 du syst√®me FWI : structure, changements et interpr√©tation. Rapport d‚Äôinformation (GLFC - Sault Ste. Marie), GLC-X-42, 59. Ressources naturelles Canada.</a></li> </li></ul> </section> </main>"
help_en <- "<title>FWI25 ‚Ä¢ Canadian Forest Fire Weather Index (hourly) ‚Äî Help</title> <link href=\"gc_custom_style.css\" rel=\"stylesheet\"/> <style>  .toc { background: #fff; border: 1px solid var(--gcds-border-default); padding: .75rem 1rem; border-radius: .5rem; }   .gc-card { background: #fff; border: 1px solid var(--gcds-border-default); padding: 1rem; border-radius: .5rem; margin-bottom: 1rem; transition: box-shadow 0.3s ease; }   .gc-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.08); }   .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1rem; }   table.coeff { width:100%; border-collapse: collapse; margin-top:.5rem; }   table.coeff th, table.coeff td { border:1px solid var(--gcds-border-default); padding:.35rem; text-align:left; }   table.coeff th { background: var(--gcds-bg-light); }   svg { width: 100%; height: auto; }   /* Inline icon + label row */   .output-heading {     display: inline-flex;     align-items: center;     gap: 0.5rem;                      /* space between icon and text */     font-size: 1rem;     margin-bottom: 0.35rem;   }   .output-heading .icon {     font-size: 1.2rem;     line-height: 1;     color: var(--gcds-bg-primary, #26374A);  /* GC primary as fallback */   }   /* Optional: ensure the paragraph sits nicely below the heading row */   .gc-card p {     margin-top: 0.25rem;     margin-bottom: 0;   } </style>  <header><h1 aria-level=\"1\" class=\"gc-page-title\" role=\"heading\">FWI25 ‚Ä¢ Canadian Forest Fire Weather Index (hourly)</h1></header><main id=\"main\"><header>  <p class=\"muted\">Help &amp; user guide ‚Äî compute hourly FWI (FWI25) from your weather data</p> </header><main> <nav aria-label=\"Table of contents\" class=\"toc\"> <strong>On this page</strong> <ol> <li><a href=\"#overview\">Overview, purpose &amp; assumptions</a></li> <li><a href=\"#workflow\">Workflow: steps &amp; outputs</a></li> <li><a href=\"#process\">Process</a></li> <li><a href=\"#models\">Modelling details &amp; assumptions</a></li> <li><a href=\"#diagram\">Process Diagram</a></li> <li><a href=\"#policy\">TBS &amp; Copilot statement</a></li> <li><a href=\"#support\">Support &amp; links</a></li> <li><a href=\"#references\">References</a></li> </ol> </nav> <section id=\"overview\"> <h2 aria-level=\"2\" role=\"heading\">1) Overview, purpose &amp; assumptions</h2> <div class=\"gc-card\"> <p><strong>FWI25</strong> converts your weather data into <em>hourly</em> Canadian Forest Fire Weather Index values to support operational tables, plots, and downstream analytics. Upload a CSV, configure options, and run the hourly engine; the app returns FWI25 outputs and (optionally) daily FWI87 summaries.</p> <h3 aria-level=\"3\" role=\"heading\">What the app can and cannot do</h3> <ul> <li>Accepts either <strong>hourly</strong> weather or <strong>daily (noon/1200)</strong> weather. If you provide daily, we statistically derive min/max values and then synthesize an hourly series before computing FWI25.</li> <li>Respects your <strong>time policy</strong>: civil (DST-aware) vs a fixed standard offset; this affects timestamps shown in tables, plot axes, and solar terms.</li> <li>Provides mapping, timezone/DST options, filters, and initial codes; previous results are hidden until you press <em>Run HFWI</em> after each upload.</li> </ul> <h3 aria-level=\"3\" role=\"heading\">Limitations</h3> <ul> <li>Assumes hourly granularity once converted; sub-hourly inputs are aggregated/ignored upstream.</li> <li>Solar calculations depend on latitude/longitude quality and your chosen time policy (DST vs standard).</li> </ul> </div> </section> <section id=\"workflow\"> <h2 aria-level=\"2\" role=\"heading\">2) Workflow: steps &amp; outputs</h2> <h3 aria-level=\"3\" role=\"heading\">Steps</h3> <div class=\"grid\"> <div class=\"gc-card\"><h3 aria-level=\"3\" role=\"heading\">Upload &amp; Map</h3><p>Upload a CSV and map required fields. Optional: station ID and lat/lon for timezone inference.</p></div> <div class=\"gc-card\"><h3 aria-level=\"3\" role=\"heading\">Options</h3><p>Select timezone/DST policy, apply filters, and set initial codes.</p></div> <div class=\"gc-card\"><h3 aria-level=\"3\" role=\"heading\">Run HFWI</h3><p>Press <em>Run HFWI</em> to compute hourly FWI25. New uploads reset prior results.</p></div> </div> <h3 aria-level=\"3\" role=\"heading\">Outputs</h3> <div class=\"grid\"> <div class=\"gc-card\"> <div class=\"output-heading\"> <span aria-hidden=\"true\" class=\"icon\"><span aria-label=\"Input Table\" role=\"img\">üì•</span></span> <strong>Input Table</strong> <span aria-hidden=\"true\" class=\"icon\"><span aria-label=\"Input Table\" role=\"img\">üì•</span></span> </div> <p>Shows mapped weather data.</p> </div> <div class=\"gc-card\"> <div class=\"output-heading\"> <span aria-hidden=\"true\" class=\"icon\"><span aria-label=\"Data Table\" role=\"img\">üìä</span></span> <strong>Output Table</strong> <span aria-hidden=\"true\" class=\"icon\"><span aria-label=\"Data Table\" role=\"img\">üìä</span></span> </div> <p>Hourly FWI25 values and optional daily FWI87 summary.</p> </div> <div class=\"gc-card\"> <div class=\"output-heading\"> <span aria-hidden=\"true\" class=\"icon\"><span aria-label=\"Chart\" role=\"img\">üìà</span></span> <strong>Plots</strong> <span aria-hidden=\"true\" class=\"icon\"><span aria-label=\"Chart\" role=\"img\">üìà</span></span> </div> <p>Visualize hourly codes and indices.</p> </div> <div class=\"gc-card\"> <div class=\"output-heading\"> <span aria-hidden=\"true\" class=\"icon\">üìù</span> <strong>Logs</strong> <span aria-hidden=\"true\" class=\"icon\">üìù</span> </div> <p>Process messages and any warnings.</p> </div> </div> </section> <section id=\"process\"> <h2 aria-level=\"2\" role=\"heading\">3) Process: upload ‚Üí map ‚Üí options ‚Üí run ‚Üí results</h2> <div class=\"gc-card\"> <p><strong>Two paths:</strong> Hourly input computes FWI25 directly. Daily input estimates min/max values, then synthesizes hourly series via Becks &amp; Trevitt before computing FWI25.</p> </div> </section> <section id=\"models\"> <h2 aria-level=\"2\" role=\"heading\">4) Daily‚Üíhourly modelling details &amp; assumptions</h2> <div class=\"gc-card\"> <h3 aria-level=\"3\" role=\"heading\">4.1 Daily ‚Üí Min/Max (statistical model)</h3> <p>When provided only with daily noon values (<code>temp</code>, <code>rh</code>, <code>ws</code>, <code>prec</code>), we compute a temperature range <code>temp_range = 17 ‚àí 0.16¬∑RH_noon + 0.22¬∑T_noon</code>. The daily maxima/minima are then: <code>T_max = T_noon + {1 if temp_range ‚â§ 2 else 2}</code>, and <code>T_min = (T_noon ‚àí 1) if temp_range ‚â§ 2 else (T_max ‚àí temp_range)</code>.</p> <p>Relative humidity extrema are paired so that minimum RH coincides with maximum temperature and vice‚Äëversa, using a parameter <code>q</code> derived from noon conditions and a function <code>find_rh(q, T)</code>, bounded to 0‚Äì100%. Wind extrema are estimated as <code>WS_min = 0.15¬∑WS_noon</code> and <code>WS_max = 1.25¬∑WS_noon</code>.</p> <p class=\"muted small\">Note: <code>find_q</code> and <code>find_rh</code> are implemented in the app‚Äôs utility code; they relate noon conditions to the diurnal humidity curve.</p> <h3 aria-level=\"3\" role=\"heading\">4.2 Min/Max ‚Üí Hourly (Becks &amp; Trevitt synthesis)</h3> <p>The hourly profiles of temperature, wind, and humidity are generated using a two‚Äëphase curve per day: a <em>rising</em> phase from shortly after sunrise to near solar noon, followed by a <em>falling</em> phase from sunset toward the next day‚Äôs minimum.</p> <ul> <li><strong>Solar timing:</strong> Solar noon is set as the midpoint between sunrise and sunset per day; sunrise and sunset come from the app‚Äôs solar routine.</li> <li><strong>Coefficients (default):</strong> <ul> <li>Temperature: Œ± = 0.0, Œ≤ = 2.75, Œ≥ = ‚àí1.9</li> <li>Relative humidity (opposite form): Œ± = 0.25, Œ≤ = 2.75, Œ≥ = ‚àí2.0</li> <li>Wind: Œ± = 1.0, Œ≤ = 1.5, Œ≥ = ‚àí1.3</li> </ul> </li> <li><strong>Rising phase (daytime):</strong> values progress from min toward max using a sine half‚Äëwave scaled between <code>TIME_MIN = SUNRISE + Œ±</code> and <code>TIME_MAX = SOLARNOON + Œ≤</code>.</li> <li><strong>Falling phase (evening‚Äìnight):</strong> values decay exponentially from the value at <code>change_at = SUNSET</code> toward the next day‚Äôs minimum using Œ≥.</li> <li><strong>Humidity form:</strong> the model operates on <code>RH_OPP = 1 ‚àí RH_fraction</code>, then converts back to percent RH (0‚Äì100%).</li> <li><strong>Precipitation allocation:</strong> daily precipitation is placed at <code>07:00</code> local time by default.</li> <li><strong>Timezone policy:</strong> timestamps use your selected civil/DST or fixed standard offset policy; plotting and tables reflect that choice.</li> </ul> </div> </section> <section id=\"diagram\"> <h2 aria-level=\"2\" role=\"heading\">5) Process flow (vertical diagram)</h2> <figure> <svg aria-labelledby=\"title desc\" role=\"img\" viewbox=\"0 0 1200 800\" preserveAspectRatio=\"xMidYMid meet\"> <title id=\"title\">FWI25 process flow</title> <desc id=\"desc\">Vertical branched flow showing hourly and daily paths merging before results, with optional FWI87 calculation.</desc> <style><![CDATA[   .box { fill:#fff; stroke:#7D828B; stroke-width:1.5; rx:6; }   .hourly { fill:#e6f4ea; }   .daily { fill:#eaf0f8; }   .merge { fill:#f9f9f9; }   .optional { fill:#f0f0f0; stroke-dasharray:4; }   .label { font:14px sans-serif; fill:#333; }   .arrow { stroke:#333; stroke-width:1.5; marker-end:url(#arrowhead); } ]]></style> <defs> <marker id=\"arrowhead\" markerheight=\"8\" markerunits=\"strokeWidth\" markerwidth=\"8\" orient=\"auto\" refx=\"8\" refy=\"5\" viewbox=\"0 0 10 10\"> <path d=\"M0,0 L10,5 L0,10 Z\" fill=\"#333\"></path> </marker> </defs> <!-- Legend --> <rect class=\"hourly\" height=\"20\" stroke=\"#7D828B\" width=\"20\" x=\"20\" y=\"10\"></rect><text class=\"label\" x=\"50\" y=\"25\">Hourly path</text> <rect class=\"daily\" height=\"20\" stroke=\"#7D828B\" width=\"20\" x=\"180\" y=\"10\"></rect><text class=\"label\" x=\"210\" y=\"25\">Daily path</text> <rect class=\"merge\" height=\"20\" stroke=\"#7D828B\" width=\"20\" x=\"340\" y=\"10\"></rect><text class=\"label\" x=\"370\" y=\"25\">Merge</text> <rect class=\"optional\" height=\"20\" stroke=\"#7D828B\" width=\"20\" x=\"480\" y=\"10\"></rect><text class=\"label\" x=\"510\" y=\"25\">Optional</text> <!-- Flow --> <!-- Upload --> <rect class=\"box merge\" height=\"50\" width=\"200\" x=\"200\" y=\"60\"><title>Upload your CSV file</title></rect> <text class=\"label\" x=\"220\" y=\"90\">Upload CSV</text> <line class=\"arrow\" x1=\"300\" x2=\"300\" y1=\"110\" y2=\"160\"></line> <!-- Map & Options --> <rect class=\"box merge\" height=\"50\" width=\"200\" x=\"200\" y=\"160\"><title>Map columns and set options</title></rect> <text class=\"label\" x=\"210\" y=\"190\">Map Columns &amp; Options</text> <line class=\"arrow\" x1=\"300\" x2=\"300\" y1=\"210\" y2=\"260\"></line> <!-- Branch --> <line class=\"arrow\" x1=\"300\" x2=\"150\" y1=\"260\" y2=\"320\"></line> <line class=\"arrow\" x1=\"300\" x2=\"450\" y1=\"260\" y2=\"320\"></line> <!-- Hourly path --> <rect class=\"box hourly\" height=\"50\" width=\"150\" x=\"100\" y=\"320\"><title>Hourly weather input</title></rect> <text class=\"label\" x=\"110\" y=\"350\">Hourly weather</text> <line class=\"arrow\" x1=\"175\" x2=\"300\" y1=\"370\" y2=\"620\"></line> <!-- Daily path --> <rect class=\"box daily\" height=\"50\" width=\"150\" x=\"400\" y=\"320\"><title>Daily weather input</title></rect> <text class=\"label\" x=\"410\" y=\"350\">Daily weather</text> <line class=\"arrow\" x1=\"475\" x2=\"475\" y1=\"370\" y2=\"420\"></line> <rect class=\"box daily\" height=\"50\" width=\"150\" x=\"400\" y=\"420\"><title>Convert daily to min/max</title></rect> <text class=\"label\" x=\"410\" y=\"450\">Statistical min/max</text> <line class=\"arrow\" x1=\"475\" x2=\"475\" y1=\"470\" y2=\"520\"></line> <rect class=\"box daily\" height=\"50\" width=\"150\" x=\"400\" y=\"520\"><title>Synthesize hourly using Becks &amp; Trevitt</title></rect> <text class=\"label\" x=\"410\" y=\"550\">Becks &amp; Trevitt hourly</text> <line class=\"arrow\" x1=\"475\" x2=\"300\" y1=\"570\" y2=\"620\"></line> <!-- Merge --> <rect class=\"box merge\" height=\"50\" width=\"200\" x=\"200\" y=\"620\"><title>Run the hourly FWI engine</title></rect> <text class=\"label\" x=\"220\" y=\"650\">Run HFWI</text> <!-- Optional FWI87 --> <rect class=\"box optional\" height=\"50\" width=\"180\" x=\"420\" y=\"620\"><title>Compute daily FWI87 summary</title></rect> <text class=\"label\" x=\"430\" y=\"650\">Optional: Calculate FWI87</text> <line class=\"arrow\" x1=\"420\" x2=\"400\" y1=\"645\" y2=\"645\"></line> <!-- Results --> <line class=\"arrow\" x1=\"300\" x2=\"300\" y1=\"670\" y2=\"720\"></line> <rect class=\"box merge\" height=\"50\" width=\"200\" x=\"200\" y=\"720\"><title>View results: tables, plots, logs</title></rect> <text class=\"label\" x=\"220\" y=\"750\">Results</text> </svg> </figure> </section> <section id=\"policy\"> <h2 aria-level=\"2\" role=\"heading\">6) TBS &amp; Copilot statement</h2> <div class=\"gc-card\"> <p>This app may use Microsoft Copilot to assist with translation and code generation.  Use follows the Government of Canada‚Äôs <a href=\"https://www.tbs-sct.canada.ca/pol/doc-eng.aspx?id=32592\"> Directive on Automated Decision‚ÄëMaking</a> and the <a href=\"https://www.canada.ca/en/government/system/digital-government/digital-government-innovations/responsible-use-ai/guide-use-generative-ai.html\" target=\"_blank\">Guide on the use of Generative AI</a>.  All AI‚Äëassisted outputs are reviewed by humans before operational use.</p> </div> </section> <section id=\"support\"> <h2 aria-level=\"2\" role=\"heading\">7) Support &amp; links</h2> <p> <ul> <li><a href=\"https://github.com/cfs-wips/fwi25-tools/issues\" target=\"_blank\">Report issues </a><br/></li> <li><a href=\"https://github.com/nrcan-cfs-fire/cffdrs-ng/\" target=\"_blank\">CFFDRS ng repo </a><br/></li> <li><a href=\"https://cffdrs.github.io/website_en/\" target=\"_blank\">NG CFFDRS FWI25 website</a><br/></li> </ul> </p> </section>  <section id=\"references\"> <h2 aria-level=\"2\" role=\"heading\">8) References</h2> <ul>   <li><a href=\"https://doi.org/10.1139/x89-120\" target=\"_blank\">Beck, T.A., &amp; Trevitt, A.C. (1989). Modelling diurnal variation in weather variables for fire danger rating. <em>Canadian Journal of Forest Research</em>.</a></li> <li><a = href=\"https://doi.org/10.4095/st000101\" target=\"_blank\">Canadian Forest Service Fire Danger Group &amp; Groupe de travail sur les dangers d'incendies (2025). The 2025 Update to the FWI System: Structure, Changes and Interpretation. Information Report (GLFC - Sault Ste. Marie), GLC-X-42, 59. Natural Resources Canada.</a> </ul> </section> </main>"
i18n_labels <- list(
  en = list(
    "title" = "Hourly FWI (NG‚ÄìCFFDRS)",
    "running_hfwi_modal" = "Running HFWI‚Ä¶ This can take a moment on first run.",
    "upload_csv" = "Import weather CSV",
    "csv_has_header" = "CSV has header",
    "tt_has_header" = "CSV has header",
    "csv_button_label" = "Browse...",
    "csv_place_holder" = "No file selected",
    "inputs_view_label" = "View",
    "inputs_view_raw" = "Raw",
    "inputs_view_hourly" = "Hourly",
    "err_no_raw" = "No raw data available",
    "err_no_hourly" = "No hourly data available",
    "lat_label" = "Latitude (¬∞)",
    "lon_label" = "Longitude (¬∞)",
    "hint_upload_to_view" = "Import a CSV to view.",
    "hint_upload_and_run" = "Import a CSV and click",
    "hint_generate_tables" = "to generate tables.",
    "column_mapping" = "Column mapping",
    "mapping_help" = "Map your columns to what NG‚ÄìCFFDRS expects. Provide either a single Date‚ÄìTime column, or Year/Month/Day/Hour.",
    "col_datetime" = "Date‚ÄìTime",
    "col_id" = "Station ID",
    "col_year" = "Year",
    "col_month" = "Month",
    "col_day" = "Day",
    "col_hour" = "Hour (0‚Äì23)",
    "col_temp" = "Temperature (¬∞C)",
    "col_rh" = "RH (%)",
    "col_ws" = "Wind (km/h)",
    "col_rain" = "Rain (mm)",
    "col_lat" = "Latitude (deg)",
    "col_lon" = "Longitude (deg)",
    "col_date" = "Date column",
    "col_time" = "Time column",
    "col_solrad" = "Solar radiation",
    "tt_col_datetime" = "Optional. Single local Date‚ÄëTime or ISO‚Äë8601 with 'Z' or UTC offset. If an explicit zone/offset is present it will be respected.",
    "tt_col_id" = "An optional station or unique ID for the weather station(s). Gets converted to text.",
    "tt_col_year" = "Year (e.g., 2025). Use if no single Date‚ÄëTime column.",
    "tt_col_month" = "Month (1‚Äì12). Use if no single Date‚ÄëTime column.",
    "tt_col_day" = "Day (1‚Äì31). Use if no single Date‚ÄëTime column.",
    "tt_col_hour" = "Hour of day in local time (0‚Äì23). Use if no single Date‚ÄëTime column.",
    "tt_col_temp" = "Air temperature in ¬∞C.",
    "tt_col_rh" = "Relative humidity in percent (0‚Äì100).",
    "tt_col_ws" = "Wind speed in km/h.",
    "tt_col_rain" = "Hourly precipitation in mm.",
    "tt_manual_lat" = "Latitude in decimal degrees (negative for south).",
    "tt_manual_lon" = "Longitude in decimal degrees (negative for west).",
    "tt_col_date" = "Optional. Select the column containing calendar dates (e.g., 2024-05-01 or 05/01/2024). Leave blank if you provide Date‚ÄìTime or Year/Month/Day/Hour.",
    "tt_col_time" = "Optional. Select the column containing times (e.g., 13:00, 1:00 PM, or 13.5 for 13:30). Leave blank if you provide Date‚ÄìTime or Year/Month/Day/Hour.",
    "tt_col_solrad" = "Optional. Solar shortwave radiation (e.g., W/m¬≤ or MJ/m¬≤/h). If mapped, it will be passed through to the hFWI input table.",
    "time_zone" = "Time zone",
    "tz_fixed_one" = "Specify",
    "tz_auto_infer" = "Infer from latitude/longitude",
    "tz_select" = "Time zone",
    "tz_offset_policy" = "Daylight Savings",
    "tz_offset_std" = "Ignore Daylight Savings Time",
    "tz_offset_modal" = "Daylight Savings Time from data",
    "tt_time_zone" = "Auto: infer one IANA time zone from lat/lon (or browser as fallback). Fixed: choose a single IANA time zone.",
    "tt_tz_offset_policy" = "Standard ignore DST for solar calculations. Modal: use the most common offset in your data (may include DST).",
    "tz_not_inferred" = "Time zone not inferred yet.",
    "filter" = "Filter",
    "drop_rows_prior" = "Modify start ",
    "tt_start_date" = "Drop rows before this local date (faster runs/plots).",
    "init_ffmc" = "Initial FFMC",
    "init_dmc" = "Initial DMC",
    "init_dc" = "Initial DC",
    "tt_init_ffmc" = "Initial Fine Fuel Moisture Code (0‚Äì101).",
    "tt_init_dmc" = "Initial Duff Moisture Code (‚â• 0).",
    "tt_init_dc" = "Initial Drought Code (‚â• 0).",
    "calc_fwi87" = "Calculate FWI87?",
    "tt_calc_fwi87" = "Also compute daily FWI (1987) from hourly inputs (slower).",
    "run_hfwi" = "Run hFWI()",
    "tt_run" = "Run hFWI() with current settings.",
    "download_results" = "Download results (CSV)",
    "tt_download" = "Download the hFWI results as CSV.",
    "tab_output" = "Output",
    "tab_plot" = "Plot",
    "tab_log" = "Log",
    "data_source" = "Data source",
    "data_src_results" = "Results (hFWI output)",
    "data_src_inputs" = "Inputs (weather)",
    "hint_run_to_compute" = "Click Run to compute results",
    "fwi25_results_title" = "FWI25 Results (hourly)",
    "fwi87_results_title" = "FWI87 Results (daily)",
    "plot_time_x" = "Time",
    "plot_vars" = "Select variables to plot",
    "plot_sel_vars_over_time" = "Selected variables over time",
    "plot_var_over_time" = "%s over time",
    "plot_dataset_label" = "Dataset to plot",
    "plot_dataset_results" = "Results (hFWI output)",
    "plot_dataset_inputs" = "Inputs (weather)",
    "plot_overlay_daily" = "Overlay daily (FWI87)",
    "tz_descriptor" = "TZ: %s \n Offset policy: %s",
    "plot_y_multi_label" = "Variables (y-axis, facetted)",
    "plot_facets_ncol_label" = "Facets per row",
    "plot_free_y_label" = "Free y-scale per facet",
    "plot_smoothing_label" = "Smoothing",
    "plot_smoothing_none" = "None",
    "plot_smoothing_loess" = "LOESS (local)",
    "plot_smoothing_gam" = "GAM (global)",
    "plot_points_label" = "Show points",
    "plot_lines_label" = "Show lines",
    "plot_ci_label" = "Show confidence band",
    "plot_color_by_label" = "Colour by",
    "plot_color_by_none" = "None",
    "plot_color_by_station" = "Station",
    "plot_color_by_dataset" = "Dataset",
    "plot_download_png" = "Download plot (PNG)",
    "plot_download_csv" = "Download plotted data (CSV)",
    "tt_plot_dataset" = "Choose to visualize hFWI results or the input weather data.",
    "tt_plot_vars" = "Choose one or more variables to visualize. Defaults depend on the selected dataset: Inputs show temperature, RH, wind speed, and rain; Results show FFMC, DMC, DC, and FWI.",
    "tt_plot_y_multi" = "Select one or more numeric variables to facet along the y‚Äëaxis.",
    "tt_plot_facets_ncol" = "Number of small multiples per row.",
    "tt_plot_free_y" = "Allow each facet to have its own y‚Äëscale.",
    "tt_plot_smoothing" = "Add a smoother to the time series (LOESS for local patterns, GAM for global).",
    "tt_plot_points" = "Toggle points on the time series.",
    "tt_plot_lines" = "Toggle lines on the time series.",
    "tt_plot_ci" = "Toggle the confidence band for the smoother when applicable.",
    "tt_plot_color_by" = "Colour series by station, dataset, or leave ungrouped.",
    "axis_y_left" = "Left y‚Äëaxis",
    "axis_y_right" = "Right y‚Äëaxis",
    "axis_y_units" = "Units",
    "legend_title" = "Legend",
    "dt_btn_copy" = "Copy",
    "dt_btn_csv" = "CSV",
    "dt_btn_excel" = "Excel",
    "dt_sSearch" = "Search:",
    "dt_sLength" = "Show _MENU_ entries",
    "dt_sInfo" = "Showing _START_ to _END_ of _TOTAL_ entries",
    "dt_sInfoEmpty" = "Showing 0 to 0 of 0 entries",
    "dt_sInfoFilt" = "(filtered from _MAX_ total entries)",
    "dt_sZero" = "No matching records found",
    "dt_sProc" = "Processing...",
    "dt_pag_first" = "First",
    "dt_pag_prev" = "Previous",
    "dt_pag_next" = "Next",
    "dt_pag_last" = "Last",
    aliases_short = list(
      "ffmc" = "FFMC",
      "dmc" = "DMC",
      "dc" = "DC",
      "isi" = "ISI",
      "bui" = "BUI",
      "fwi" = "FWI",
      "dsr" = "DSR"
    ),
    aliases_long = list(
      "ffmc" = "Fine Fuel Moisture Code (FFMC)",
      "dmc" = "Duff Moisture Code (DMC)",
      "dc" = "Drought Code (DC)",
      "isi" = "Initial Spread Index (ISI)",
      "bui" = "Buildup Index (BUI)",
      "fwi" = "Fire Weather Index (FWI)",
      "dsr" = "Daily Severity Rating (DSR)"
    ),
    "skip_to_main" = "Skip to main content",
    "aria_app_label" = "Hourly FWI application",
    "aria_tabs_label" = "Primary output tabs",
    "aria_run_label" = "Run hFWI",
    "iana_prefix" = "IANA time zone:",
    "modal_title" = "How to use the FWI25 app",
    "modal_close" = "Close",
    # GC-styled help modal text (sentence case, plain language)
    "modal_body_html" = help_en,
    "csv_spec_html" = "<p><strong>Expected CSV structure</strong></p><ul><li><em>Required columns</em>: Temperature (¬∞C), RH (%), Wind (km/h), Rain (mm).</li><li><em>Date/Time</em>: either one <strong>Date‚ÄëTime</strong> column (local or ISO‚Äë8601 with <code>Z</code>/UTC offset), or four columns: <strong>Year</strong>, <strong>Month</strong>, <strong>Day</strong>, <strong>Hour</strong> (0‚Äì23).</li><li><em>Optional</em>: Latitude & Longitude (degrees) for time‚Äëzone inference if TZ mode = Auto;</li><li>Column headers can be reselected via the <strong>Column mapping</strong> panel below; missing values allowed ('', NA, NaN, null).</li></ul>",
    "csv_spec_sr" = "Expected CSV: Required columns are Temperature in degrees Celsius, Relative Humidity in percent, Wind in kilometers per hour, and Rain in millimeters. Provide either a single Date-Time column, or Year/Month/Day/Hour (0 to 23). Latitude and Longitude are optional but helpful for automatic time-zone inference.",
    "pop_time_zone_html" = "<p><strong>Time zone mode</strong></p><ul><li><em>Auto</em>: infer one IANA time zone from latitude/longitude (or use browser as fallback).</li><li><em>Fixed</em>: choose a single IANA time zone for all rows.</li></ul><p>The zone affects <em>local dates</em> and solar calculations (e.g., sunrise).</p>",
    "pop_tz_offset_html" = "<p><strong>Offset policy for solar calcs</strong></p><ul><li><em>Standard</em>: ignore DST; use the standard offset year‚Äëround.</li><li><em>Modal</em>: use the most common offset present in your data (may include DST).</li></ul>",
    "err_non_numeric_cols" = "The following columns must be numeric: {cols}",

    # --- Validation/guardrail keys ---
    "val_ok" = "OK",
    "val_check" = "Check",
    "val_fix" = "Fix",
    "val_examples" = "Examples:",
    "val_blocking_header" = "Fix the items below to enable Prepare",
    "val_missing_time_path" = "Provide either a combined Datetime or all of Year, Month, Day, Hour",
    "val_missing_met" = "Map all required meteorology: Temperature, Relative Humidity, Wind Speed, Precipitation",
    "val_missing_geo" = "Enter valid Latitude and Longitude",
    "val_both_paths" = "Both Datetime and Year/Month/Day/Hour are mapped. The app will use Datetime and ignore the parts.",
    "val_no_numeric" = "Values are not numeric or cannot be read as numbers",
    "val_rain_negative" = "Precipitation contains negative values (must be ‚â• 0)",
    "val_rain_extreme" = "Unusually large precipitation values detected",
    "val_rh_range" = "Relative Humidity must be in 0‚Äì100 %",
    "val_ws_negative" = "Wind speed contains negative values (must be ‚â• 0)",
    "val_ws_extreme" = "Unusually high wind speeds detected",
    "val_temp_extreme" = "Unusually low or high temperatures detected",
    "val_solrad_negative" = "Solar radiation contains negative values (must be ‚â• 0)",
    "val_solrad_extreme" = "Unusually high solar radiation detected",
    "val_year_missing" = "Year values are missing or unreadable",
    "val_year_outside" = "Years outside the 1900‚Äì2100 range",
    "val_month_range" = "Month must be in 1‚Äì12",
    "val_day_range" = "Day must be in 1‚Äì31",
    "val_hour_range" = "Hour must be in 0‚Äì23 (or provide HH:MM/HHMM)",
    "val_hour_hhmm" = "Hour appears to be HH:MM or HHMM; using the hour part",
    "val_datetime_parse_low" = "Datetime values have a low parse success rate",
    "val_date_invalid" = "Invalid calendar dates when combining Year/Month/Day",
    "val_station_issues" = "issues"
  ),
  fr = list(
    "title" = "IFF horaire (NG‚ÄëCFFDRS)",
    "running_hfwi_modal" = "Ex√©cution de HFWI‚Ä¶ Cela peut prendre un moment lors de la premi√®re ex√©cution.",
    "upload_csv" = "Importer le fichier CSV m√©t√©o",
    "csv_has_header" = "Le CSV comporte une ligne d‚Äôen‚Äët√™te",
    "tt_has_header" = "Le CSV comporte une ligne d‚Äôen‚Äët√™te",
    "csv_button_label" = "Parcourir...",
    "csv_place_holder" = "Aucun fichier s√©lectionn√©",
    "inputs_view_label" = "Vue",
    "inputs_view_raw" = "Brut",
    "inputs_view_hourly" = "Horaire",
    "err_no_raw" = "Aucune donn√©e brute disponible",
    "err_no_hourly" = "Aucune donn√©e horaire disponible",
    "lat_label" = "Latitude (¬∞)",
    "lon_label" = "Longitude (¬∞)",
    "column_mapping" = "Correspondance des colonnes",
    "mapping_help" = "Faites correspondre vos colonnes √† ce qu‚Äôexige NG‚ÄëCFFDRS. Fournissez soit une colonne Date‚Äëheure unique, soit Ann√©e/Mois/Jour/Heure.",
    "col_datetime" = "Date‚Äëheure",
    "col_id" = "ID de station",
    "col_year" = "Ann√©e",
    "col_month" = "Mois",
    "col_day" = "Jour",
    "col_hour" = "Heure (0‚Äì23)",
    "col_temp" = "Temp√©rature (¬∞C)",
    "col_rh" = "HR (%)",
    "col_ws" = "Vent (km/h)",
    "col_rain" = "Pluie (mm)",
    "col_lat" = "Latitude (¬∞)",
    "col_lon" = "Longitude (¬∞)",
    "col_date" = "Colonne de date",
    "col_time" = "Colonne d‚Äôheure",
    "col_solrad" = "Rayonnement solaire",
    "hint_upload_to_view" = "Importez un CSV pour afficher.",
    "hint_upload_and_run" = "Importez un CSV et cliquez sur",
    "hint_generate_tables" = "pour g√©n√©rer les tableaux.",
    "tt_col_datetime" = "Optionnel. Une seule date‚Äëheure locale ou ISO‚Äë8601 avec ¬´ Z ¬ª/d√©calage UTC. Si une zone/d√©calage explicite est pr√©sent, il sera respect√©.",
    "tt_col_id" = "Optionnel. Identifiant de station (converti en texte).",
    "tt_col_year" = "Ann√©e (ex. 2025). √Ä utiliser si aucune colonne Date‚Äëheure unique.",
    "tt_col_month" = "Mois (1‚Äì12). √Ä utiliser si aucune colonne Date‚Äëheure unique.",
    "tt_col_day" = "Jour (1‚Äì31). √Ä utiliser si aucune colonne Date‚Äëheure unique.",
    "tt_col_hour" = "Heure locale (0‚Äì23). √Ä utiliser si aucune colonne Date‚Äëheure unique.",
    "tt_col_temp" = "Temp√©rature de l‚Äôair en ¬∞C.",
    "tt_col_rh" = "Humidit√© relative en pourcentage (0‚Äì100).",
    "tt_col_ws" = "Vitesse du vent en km/h.",
    "tt_col_rain" = "Pr√©cipitations horaires en mm.",
    "tt_manual_lat" = "Latitude en degr√©s d√©cimaux (n√©gatif pour sud).",
    "tt_manual_lon" = "Longitude en degr√©s d√©cimaux (n√©gatif pour ouest).",
    "tt_col_date" = "Optionnel. S√©lectionnez la colonne qui contient les dates (p. ex., 2024‚Äë05‚Äë01 ou 01/05/2024). Laissez vide si vous fournissez Date‚Äëheure ou Ann√©e/Mois/Jour/Heure.",
    "tt_col_time" = "Optionnel. S√©lectionnez la colonne qui contient les heures (p. ex., 13:00, 13 h ou 13,5 pour 13:30). Laissez vide si vous fournissez Date‚Äëheure ou Ann√©e/Mois/Jour/Heure.",
    "tt_col_solrad" = "Optionnel. Rayonnement solaire (p. ex., W/m¬≤ ou MJ/m¬≤/h). S‚Äôil est cartographi√©, il sera transmis au tableau d‚Äôentr√©e pour hFWI.",
    "time_zone" = "Fuseau horaire",
    "tz_fixed_one" = "Utiliser un seul fuseau horaire pour toutes les lignes",
    "tz_auto_infer" = "D√©duire un fuseau horaire √† partir de la latitude/longitude",
    "tz_select" = "Fuseau horaire",
    "tz_offset_policy" = "Les calculs solaires",
    "tz_offset_std" = "Standard (ignorer l‚Äôheure d‚Äô√©t√©)",
    "tz_offset_modal" = "√Ä partir des donn√©es (modal; peut inclure l‚Äôheure d‚Äô√©t√©)",
    "tt_time_zone" = "Auto : d√©duire un fuseau IANA √† partir lat/lon (ou navigateur). Fixe : choisir un seul fuseau IANA.",
    "tt_tz_offset_policy" = "Standard : ignorer l‚Äôheure d‚Äô√©t√© pour les calculs solaires. Modal : utiliser le d√©calage le plus fr√©quent dans vos donn√©es (peut inclure l‚Äôheure d‚Äô√©t√©).",
    "tz_not_inferred" = "Fuseau horaire non encore d√©duit.",
    "filter" = "Filtre",
    "drop_rows_prior" = "Modifier d√©but",
    "tt_start_date" = "Supprimer les lignes avant cette date locale (ex√©cution/graphes plus rapides).",
    "init_ffmc" = "FFMC initial",
    "init_dmc" = "DMC initial",
    "init_dc" = "DC initial",
    "tt_init_ffmc" = "FFMC initial (0‚Äì101).",
    "tt_init_dmc" = "DMC initial (‚â• 0).",
    "tt_init_dc" = "DC initial (‚â• 0).",
    "calc_fwi87" = "Calculer IFM87?",
    "tt_calc_fwi87" = "Calculer aussi l‚ÄôIFM quotidien (1987) √† partir des donn√©es horaires (plus lent).",
    "run_hfwi" = "Ex√©cuter hFWI()",
    "tt_run" = "Ex√©cuter hFWI() avec les param√®tres actuels.",
    "download_results" = "T√©l√©charger les r√©sultats (CSV)",
    "tt_download" = "T√©l√©charger les r√©sultats hFWI en CSV.",
    "tab_output" = "R√©sultats",
    "tab_plot" = "Graphique",
    "tab_log" = "Journal",
    "data_source" = "Source de donn√©es",
    "data_src_results" = "R√©sultats (sortie hFWI)",
    "data_src_inputs" = "Entr√©es (m√©t√©o)",
    "hint_run_to_compute" = "Cliquez sur Ex√©cuter pour calculer les r√©sultats",
    "fwi25_results_title" = "R√©sultats IFM25 (horaire)",
    "fwi87_results_title" = "R√©sultats IFM87 (quotidiens)",
    "plot_time_x" = "Temps",
    "plot_vars" = "S√©lectionnez les variables √† tracer",
    "plot_sel_vars_over_time" = "Variables s√©lectionn√©es au fil du temps",
    "plot_var_over_time" = "%s au fil du temps",
    "plot_overlay_daily" = "Superposer la courbe quotidienne (IFM87)",
    "tz_descriptor" = "Fuseau: %s \n Politique de d√©calage: %s",
    "plot_dataset_label" = "Jeu de donn√©es √† tracer",
    "plot_dataset_results" = "R√©sultats (sortie hFWI)",
    "plot_dataset_inputs" = "Entr√©es (m√©t√©o)",
    "plot_y_multi_label" = "Variables (axe y, par facettes)",
    "plot_facets_ncol_label" = "Nombre de facettes par ligne",
    "plot_free_y_label" = "Axe des y libre par facette",
    "plot_smoothing_label" = "Lissage",
    "plot_smoothing_none" = "Aucun",
    "plot_smoothing_loess" = "LOESS (local)",
    "plot_smoothing_gam" = "GAM (global)",
    "plot_points_label" = "Afficher les points",
    "plot_lines_label" = "Afficher les lignes",
    "plot_ci_label" = "Afficher la bande de confiance",
    "plot_color_by_label" = "Couleur selon",
    "plot_color_by_none" = "Aucun",
    "plot_color_by_station" = "Station",
    "plot_color_by_dataset" = "Jeu de donn√©es",
    "plot_download_png" = "T√©l√©charger le graphique (PNG)",
    "plot_download_csv" = "T√©l√©charger les donn√©es du graphique (CSV)",
    "tt_plot_dataset" = "Choisissez d‚Äôafficher les r√©sultats hFWI ou les donn√©es m√©t√©o d‚Äôentr√©e.",
    "tt_plot_vars" = "Choisissez une ou plusieurs variables √† visualiser. Les valeurs par d√©faut d√©pendent du jeu de donn√©es s√©lectionn√© : les entr√©es affichent la temp√©rature, l‚Äôhumidit√© relative, la vitesse du vent et la pluie; les r√©sultats affichent FFMC, DMC, DC et FWI.",
    "tt_plot_y_multi" = "S√©lectionnez une ou plusieurs variables num√©riques √† afficher par facettes (axe y).",
    "tt_plot_facets_ncol" = "Nombre de petits multiples par ligne.",
    "tt_plot_free_y" = "Autorise une √©chelle des y ind√©pendante par facette.",
    "tt_plot_smoothing" = "Ajoute un lissage √† la s√©rie temporelle (LOESS pour les tendances locales, GAM pour les tendances globales).",
    "tt_plot_points" = "Activer/d√©sactiver les points sur la s√©rie temporelle.",
    "tt_plot_lines" = "Activer/d√©sactiver les lignes sur la s√©rie temporelle.",
    "tt_plot_ci" = "Activer/d√©sactiver la bande de confiance du lissage le cas √©ch√©ant.",
    "tt_plot_color_by" = "Colorer les s√©ries par station, par jeu de donn√©es, ou ne pas grouper.",
    "axis_y_left" = "Axe y gauche",
    "axis_y_right" = "Axe y droit",
    "axis_y_units" = "Unit√©s",
    "legend_title" = "L√©gende",
    "dt_btn_copy" = "Copier",
    "dt_btn_csv" = "CSV",
    "dt_btn_excel" = "Excel",
    "dt_sSearch" = "Rechercher :",
    "dt_sLength" = "Afficher _MENU_ √©l√©ments",
    "dt_sInfo" = "Affichage de _START_ √† _END_ sur _TOTAL_ √©l√©ments",
    "dt_sInfoEmpty" = "Affichage de 0 √† 0 sur 0 √©l√©ment",
    "dt_sInfoFilt" = "(filtr√© √† partir de _MAX_ √©l√©ments au total)",
    "dt_sZero" = "Aucun enregistrement correspondant trouv√©",
    "dt_sProc" = "Traitement...",
    "dt_pag_first" = "Premier",
    "dt_pag_prev" = "Pr√©c√©dent",
    "dt_pag_next" = "Suivant",
    "dt_pag_last" = "Dernier",
    aliases_short = list(
      "ffmc" = "FFMC",
      "dmc" = "DMC",
      "dc" = "DC",
      "isi" = "IPI (ISI)",
      "bui" = "BUI",
      "fwi" = "IFM (FWI)",
      "dsr" = "IGQ (DSR)"
    ),
    aliases_long = list(
      "ffmc" = "Indice d‚Äôhumidit√© des combustibles fins (FFMC)",
      "dmc" = "Indice d‚Äôhumidit√© de la couche organique (DMC)",
      "dc" = "Indice de s√©cheresse (DC)",
      "isi" = "Indice de propagation initiale (IPI/ISI)",
      "bui" = "Indice d‚Äôaccumulation (BUI)",
      "fwi" = "Indice for√™t‚Äëm√©t√©o (IFM/FWI)",
      "dsr" = "Indice de gravit√© quotidienne (IGQ/DSR)"
    ),
    "skip_to_main" = "Passer au contenu principal",
    "aria_app_label" = "Application IFF horaire",
    "aria_tabs_label" = "Onglets de sortie principaux",
    "aria_run_label" = "Ex√©cuter hFWI",
    "iana_prefix" = "Fuseau IANA :",
    "modal_title" = "Comment utiliser l‚Äôapplication FWI25",
    "modal_close" = "Fermer",
    # Texte du mode d‚Äôaide (style GC, casse phrase, langage simple)
    "modal_body_html" = help_fr,
    "csv_spec_html" = "<p><strong>Structure CSV attendue</strong></p><ul><li><em>Colonnes obligatoires</em> : Temp√©rature (¬∞C), HR (%), Vent (km/h), Pluie (mm).</li><li><em>Date/Heure</em> : une <strong>Date‚Äëheure</strong> (locale ou ISO‚Äë8601 avec <code>Z</code>/d√©calage UTC) ou <strong>Ann√©e</strong>/<strong>Mois</strong>/<strong>Jour</strong>/<strong>Heure</strong> (0‚Äì23).</li><li><em>Optionnel</em> : Latitude & Longitude (degr√©s) pour le fuseau en mode Auto;</li><li>Les en‚Äët√™tes se r√®glent dans <strong>Correspondance des colonnes</strong>; valeurs manquantes permises ('', NA, NaN, null).</li></ul>",
    "csv_spec_sr" = "CSV attendu : Temp√©rature en ¬∞C, Humidit√© relative en %, Vent en km/h, Pluie en mm. Fournir une colonne Date‚Äëheure unique, ou Ann√©e/Mois/Jour/Heure (0 √† 23). Latitude et Longitude optionnelles (fuseau automatique).",
    "pop_time_zone_html" = "<p><strong>Mode de fuseau horaire</strong></p><ul><li><em>Auto</em> : d√©duire un fuseau IANA √† partir de la latitude/longitude (ou navigateur).</li><li><em>Fixe</em> : choisir un seul fuseau IANA pour toutes les lignes.</li></ul><p>Le fuseau influe sur les <em>dates locales</em> et les calculs solaires (p. ex., lever du soleil).</p>",
    "pop_tz_offset_html" = "<p><strong>Politique de d√©calage pour les calculs solaires</strong></p><ul><li><em>Standard</em> : ignorer l‚Äôheure d‚Äô√©t√©; utiliser le d√©calage standard toute l‚Äôann√©e.</li><li><em>Modal</em> : utiliser le d√©calage le plus fr√©quent dans vos donn√©es (peut inclure l‚Äôheure d‚Äô√©t√©).</li></ul>",
    "err_non_numeric_cols" = "Les colonnes suivantes doivent √™tre num√©riques : {cols}",

    # --- Cha√Ænes de validation/guardrails ---
    "val_ok" = "OK",
    "val_check" = "√Ä v√©rifier",
    "val_fix" = "√Ä corriger",
    "val_examples" = "Exemples :",
    "val_blocking_header" = "Corrigez les √©l√©ments ci‚Äëdessous pour activer Pr√©parer",
    "val_missing_time_path" = "Fournissez soit une Date‚Äëheure combin√©e, soit Ann√©e, Mois, Jour et Heure",
    "val_missing_met" = "Cartographiez toutes les variables m√©t√©o requises : Temp√©rature, Humidit√© relative, Vitesse du vent, Pr√©cipitations",
    "val_missing_geo" = "Saisissez une Latitude et une Longitude valides",
    "val_both_paths" = "Date‚Äëheure et Ann√©e/Mois/Jour/Heure sont tous renseign√©s. L‚Äôapplication utilisera Date‚Äëheure et ignorera les parties.",
    "val_no_numeric" = "Les valeurs ne sont pas num√©riques ou ne peuvent pas √™tre lues comme des nombres",
    "val_rain_negative" = "Les pr√©cipitations contiennent des valeurs n√©gatives (doivent √™tre ‚â• 0)",
    "val_rain_extreme" = "Valeurs de pr√©cipitations inhabituellement √©lev√©es d√©tect√©es",
    "val_rh_range" = "L‚Äôhumidit√© relative doit √™tre comprise entre 0 et 100 %",
    "val_ws_negative" = "La vitesse du vent contient des valeurs n√©gatives (doit √™tre ‚â• 0)",
    "val_ws_extreme" = "Vitesses de vent inhabituellement √©lev√©es d√©tect√©es",
    "val_temp_extreme" = "Temp√©ratures inhabituellement basses ou √©lev√©es d√©tect√©es",
    "val_solrad_negative" = "Le rayonnement solaire contient des valeurs n√©gatives (doit √™tre ‚â• 0)",
    "val_solrad_extreme" = "Rayonnement solaire inhabituellement √©lev√© d√©tect√©",
    "val_year_missing" = "Les valeurs d‚ÄôAnn√©e sont manquantes ou illisibles",
    "val_year_outside" = "Ann√©es en dehors de l‚Äôintervalle 1900‚Äì2100",
    "val_month_range" = "Le mois doit √™tre compris entre 1 et 12",
    "val_day_range" = "Le jour doit √™tre compris entre 1 et 31",
    "val_hour_range" = "L‚Äôheure doit √™tre comprise entre 0 et 23 (ou fournir HH:MM/HHMM)",
    "val_hour_hhmm" = "L‚Äôheure semble au format HH:MM ou HHMM ; utilisation de la partie heure",
    "val_datetime_parse_low" = "Faible taux de r√©ussite lors de l‚Äôanalyse des valeurs Date‚Äëheure",
    "val_date_invalid" = "Dates de calendrier invalides lors de la combinaison Ann√©e/Mois/Jour",
    "val_station_issues" = "probl√®mes"
  )
)
