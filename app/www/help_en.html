<!DOCTYPE html>

<html lang="en-CA">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>FWI25 â€¢ Canadian Forest Fire Weather Index (hourly) â€” Help</title>
<link href="gc_custom_style.css" rel="stylesheet"/>
<style>
 .toc { background: #fff; border: 1px solid var(--gcds-border-default); padding: .75rem 1rem; border-radius: .5rem; }
  .gc-card { background: #fff; border: 1px solid var(--gcds-border-default); padding: 1rem; border-radius: .5rem; margin-bottom: 1rem; transition: box-shadow 0.3s ease; }
  .gc-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
  .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1rem; }
  table.coeff { width:100%; border-collapse: collapse; margin-top:.5rem; }
  table.coeff th, table.coeff td { border:1px solid var(--gcds-border-default); padding:.35rem; text-align:left; }
  table.coeff th { background: var(--gcds-bg-light); }
  svg { width: 100%; height: auto; } 
 /* Inline icon + label row */
  .output-heading {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;                      /* space between icon and text */
    font-size: 1rem;
    margin-bottom: 0.35rem;
  }
  .output-heading .icon {
    font-size: 1.2rem;
    line-height: 1;
    color: var(--gcds-bg-primary, #26374A);  /* GC primary as fallback */
  }
  /* Optional: ensure the paragraph sits nicely below the heading row */
  .gc-card p {
    margin-top: 0.25rem;
    margin-bottom: 0;
  }
</style>
</head>
<body><header><h1 aria-level="1" class="gc-page-title" role="heading">FWI25 â€¢ Canadian Forest Fire Weather Index (hourly)</h1></header><main id="main"><header>

<p class="muted">Help &amp; user guide â€” compute hourly FWI (FWI25) from your weather data</p>
</header><main>
<nav aria-label="Table of contents" class="toc">
<strong>On this page</strong>
<ol>
<li><a href="#overview">Overview, purpose &amp; assumptions</a></li>
<li><a href="#workflow">Workflow: steps &amp; outputs</a></li>
<li><a href="#process">Process</a></li>
<li><a href="#models">Modelling details &amp; assumptions</a></li>
<li><a href="#diagram">Process Diagram</a></li>
<li><a href="#policy">TBS &amp; Copilot statement</a></li>
<li><a href="#support">Support &amp; links</a></li>
<li><a href="#references">References</a></li>
</ol>
</nav>
<section id="overview">
<h2 aria-level="2" role="heading">1) Overview, purpose &amp; assumptions</h2>
<div class="gc-card">
<p><strong>FWI25</strong> converts your weather data into <em>hourly</em> Canadian Forest Fire Weather Index values to support operational tables, plots, and downstream analytics. Upload a CSV, configure options, and run the hourly engine; the app returns FWI25 outputs and (optionally) daily FWI87 summaries.</p>
<h3 aria-level="3" role="heading">What the app can and cannot do</h3>
<ul>
<li>Accepts either <strong>hourly</strong> weather or <strong>daily (noon/1200)</strong> weather. If you provide daily, we statistically derive min/max values and then synthesize an hourly series before computing FWI25.</li>
<li>Respects your <strong>time policy</strong>: civil (DST-aware) vs a fixed standard offset; this affects timestamps shown in tables, plot axes, and solar terms.</li>
<li>Provides mapping, timezone/DST options, filters, and initial codes; previous results are hidden until you press <em>Run HFWI</em> after each upload.</li>
</ul>
<h3 aria-level="3" role="heading">Limitations</h3>
<ul>
<li>Assumes hourly granularity once converted; sub-hourly inputs are aggregated/ignored upstream.</li>
<li>Solar calculations depend on latitude/longitude quality and your chosen time policy (DST vs standard).</li>
</ul>
</div>
</section>
<section id="workflow">
<h2 aria-level="2" role="heading">2) Workflow: steps &amp; outputs</h2>
<h3 aria-level="3" role="heading">Steps</h3>
<div class="grid">
<div class="gc-card"><h3 aria-level="3" role="heading">Upload &amp; Map</h3><p>Upload a CSV and map required fields. Optional: station ID and lat/lon for timezone inference.</p></div>
<div class="gc-card"><h3 aria-level="3" role="heading">Options</h3><p>Select timezone/DST policy, apply filters, and set initial codes.</p></div>
<div class="gc-card"><h3 aria-level="3" role="heading">Run HFWI</h3><p>Press <em>Run HFWI</em> to compute hourly FWI25. New uploads reset prior results.</p></div>
</div>
<h3 aria-level="3" role="heading">Outputs</h3>
<div class="grid">
<div class="gc-card">
<div class="output-heading">
<span aria-hidden="true" class="icon"><span aria-label="Input Table" role="img">ğŸ“¥</span></span>
<strong>Input Table</strong>
<span aria-hidden="true" class="icon"><span aria-label="Input Table" role="img">ğŸ“¥</span></span>
</div>
<p>Shows mapped weather data.</p>
</div>
<div class="gc-card">
<div class="output-heading">
<span aria-hidden="true" class="icon"><span aria-label="Data Table" role="img">ğŸ“Š</span></span>
<strong>Output Table</strong>
<span aria-hidden="true" class="icon"><span aria-label="Data Table" role="img">ğŸ“Š</span></span>
</div>
<p>Hourly FWI25 values and optional daily FWI87 summary.</p>
</div>
<div class="gc-card">
<div class="output-heading">
<span aria-hidden="true" class="icon"><span aria-label="Chart" role="img">ğŸ“ˆ</span></span>
<strong>Plots</strong>
<span aria-hidden="true" class="icon"><span aria-label="Chart" role="img">ğŸ“ˆ</span></span>
</div>
<p>Visualize hourly codes and indices.</p>
</div>
<div class="gc-card">
<div class="output-heading">
<span aria-hidden="true" class="icon">ğŸ“</span>
<strong>Logs</strong>
<span aria-hidden="true" class="icon">ğŸ“</span>
</div>
<p>Process messages and any warnings.</p>
</div>
</div>
</section>
<section id="process">
<h2 aria-level="2" role="heading">3) Process: upload â†’ map â†’ options â†’ run â†’ results</h2>
<div class="gc-card">
<p><strong>Two paths:</strong> Hourly input computes FWI25 directly. Daily input estimates min/max values, then synthesizes hourly series via Becks &amp; Trevitt before computing FWI25.</p>
</div>
</section>
<section id="models">
<h2 aria-level="2" role="heading">4) Dailyâ†’hourly modelling details &amp; assumptions</h2>
<div class="gc-card">
<h3 aria-level="3" role="heading">4.1 Daily â†’ Min/Max (statistical model)</h3>
<p>When provided only with daily noon values (<code>temp</code>, <code>rh</code>, <code>ws</code>, <code>prec</code>), we compute a temperature range <code>temp_range = 17 âˆ’ 0.16Â·RH_noon + 0.22Â·T_noon</code>. The daily maxima/minima are then: <code>T_max = T_noon + {1 if temp_range â‰¤ 2 else 2}</code>, and <code>T_min = (T_noon âˆ’ 1) if temp_range â‰¤ 2 else (T_max âˆ’ temp_range)</code>.</p>
<p>Relative humidity extrema are paired so that minimum RH coincides with maximum temperature and viceâ€‘versa, using a parameter <code>q</code> derived from noon conditions and a function <code>find_rh(q, T)</code>, bounded to 0â€“100%. Wind extrema are estimated as <code>WS_min = 0.15Â·WS_noon</code> and <code>WS_max = 1.25Â·WS_noon</code>.</p>
<p class="muted small">Note: <code>find_q</code> and <code>find_rh</code> are implemented in the appâ€™s utility code; they relate noon conditions to the diurnal humidity curve.</p>
<h3 aria-level="3" role="heading">4.2 Min/Max â†’ Hourly (Becks &amp; Trevitt synthesis)</h3>
<p>The hourly profiles of temperature, wind, and humidity are generated using a twoâ€‘phase curve per day: a <em>rising</em> phase from shortly after sunrise to near solar noon, followed by a <em>falling</em> phase from sunset toward the next dayâ€™s minimum.</p>
<ul>
<li><strong>Solar timing:</strong> Solar noon is set as the midpoint between sunrise and sunset per day; sunrise and sunset come from the appâ€™s solar routine.</li>
<li><strong>Coefficients (default):</strong>
<ul>
<li>Temperature: Î± = 0.0, Î² = 2.75, Î³ = âˆ’1.9</li>
<li>Relative humidity (opposite form): Î± = 0.25, Î² = 2.75, Î³ = âˆ’2.0</li>
<li>Wind: Î± = 1.0, Î² = 1.5, Î³ = âˆ’1.3</li>
</ul>
</li>
<li><strong>Rising phase (daytime):</strong> values progress from min toward max using a sine halfâ€‘wave scaled between <code>TIME_MIN = SUNRISE + Î±</code> and <code>TIME_MAX = SOLARNOON + Î²</code>.</li>
<li><strong>Falling phase (eveningâ€“night):</strong> values decay exponentially from the value at <code>change_at = SUNSET</code> toward the next dayâ€™s minimum using Î³.</li>
<li><strong>Humidity form:</strong> the model operates on <code>RH_OPP = 1 âˆ’ RH_fraction</code>, then converts back to percent RH (0â€“100%).</li>
<li><strong>Precipitation allocation:</strong> daily precipitation is placed at <code>07:00</code> local time by default.</li>
<li><strong>Timezone policy:</strong> timestamps use your selected civil/DST or fixed standard offset policy; plotting and tables reflect that choice.</li>
</ul>
</div>
</section>
<section id="diagram">
<h2 aria-level="2" role="heading">5) Process flow (vertical diagram)</h2>
<figure>
<svg aria-labelledby="title desc" role="img" viewbox="0 0 600 800">
<title id="title">FWI25 process flow</title>
<desc id="desc">Vertical branched flow showing hourly and daily paths merging before results, with optional FWI87 calculation.</desc>
<style><![CDATA[
  .box { fill:#fff; stroke:#7D828B; stroke-width:1.5; rx:6; }
  .hourly { fill:#e6f4ea; }
  .daily { fill:#eaf0f8; }
  .merge { fill:#f9f9f9; }
  .optional { fill:#f0f0f0; stroke-dasharray:4; }
  .label { font:14px sans-serif; fill:#333; }
  .arrow { stroke:#333; stroke-width:1.5; marker-end:url(#arrowhead); }
]]></style>
<defs>
<marker id="arrowhead" markerheight="8" markerunits="strokeWidth" markerwidth="8" orient="auto" refx="8" refy="5" viewbox="0 0 10 10">
<path d="M0,0 L10,5 L0,10 Z" fill="#333"></path>
</marker>
</defs>
<!-- Legend -->
<rect class="hourly" height="20" stroke="#7D828B" width="20" x="20" y="10"></rect><text class="label" x="50" y="25">Hourly path</text>
<rect class="daily" height="20" stroke="#7D828B" width="20" x="180" y="10"></rect><text class="label" x="210" y="25">Daily path</text>
<rect class="merge" height="20" stroke="#7D828B" width="20" x="340" y="10"></rect><text class="label" x="370" y="25">Merge</text>
<rect class="optional" height="20" stroke="#7D828B" width="20" x="480" y="10"></rect><text class="label" x="510" y="25">Optional</text>
<!-- Flow -->
<!-- Upload -->
<rect class="box merge" height="50" width="200" x="200" y="60"><title>Upload your CSV file</title></rect>
<text class="label" x="220" y="90">Upload CSV</text>
<line class="arrow" x1="300" x2="300" y1="110" y2="160"></line>
<!-- Map & Options -->
<rect class="box merge" height="50" width="200" x="200" y="160"><title>Map columns and set options</title></rect>
<text class="label" x="210" y="190">Map Columns &amp; Options</text>
<line class="arrow" x1="300" x2="300" y1="210" y2="260"></line>
<!-- Branch -->
<line class="arrow" x1="300" x2="150" y1="260" y2="320"></line>
<line class="arrow" x1="300" x2="450" y1="260" y2="320"></line>
<!-- Hourly path -->
<rect class="box hourly" height="50" width="150" x="100" y="320"><title>Hourly weather input</title></rect>
<text class="label" x="110" y="350">Hourly weather</text>
<line class="arrow" x1="175" x2="300" y1="370" y2="620"></line>
<!-- Daily path -->
<rect class="box daily" height="50" width="150" x="400" y="320"><title>Daily weather input</title></rect>
<text class="label" x="410" y="350">Daily weather</text>
<line class="arrow" x1="475" x2="475" y1="370" y2="420"></line>
<rect class="box daily" height="50" width="150" x="400" y="420"><title>Convert daily to min/max</title></rect>
<text class="label" x="410" y="450">Statistical min/max</text>
<line class="arrow" x1="475" x2="475" y1="470" y2="520"></line>
<rect class="box daily" height="50" width="150" x="400" y="520"><title>Synthesize hourly using Becks &amp; Trevitt</title></rect>
<text class="label" x="410" y="550">Becks &amp; Trevitt hourly</text>
<line class="arrow" x1="475" x2="300" y1="570" y2="620"></line>
<!-- Merge -->
<rect class="box merge" height="50" width="200" x="200" y="620"><title>Run the hourly FWI engine</title></rect>
<text class="label" x="220" y="650">Run HFWI</text>
<!-- Optional FWI87 -->
<rect class="box optional" height="50" width="180" x="420" y="620"><title>Compute daily FWI87 summary</title></rect>
<text class="label" x="430" y="650">Optional: Calculate FWI87</text>
<line class="arrow" x1="420" x2="400" y1="645" y2="645"></line>
<!-- Results -->
<line class="arrow" x1="300" x2="300" y1="670" y2="720"></line>
<rect class="box merge" height="50" width="200" x="200" y="720"><title>View results: tables, plots, logs</title></rect>
<text class="label" x="220" y="750">Results</text>
</svg>
</figure>
</section>
<section id="policy">
<h2 aria-level="2" role="heading">6) TBS &amp; Copilot statement</h2>
<div class="gc-card">
<p>This app may use Microsoft Copilot to assist with translation and code generation. 
Use follows the Government of Canadaâ€™s <a href="https://www.tbs-sct.canada.ca/pol/doc-eng.aspx?id=32592">
Directive on Automated Decisionâ€‘Making</a> and the <a href="https://www.canada.ca/en/government/system/digital-government/digital-government-innovations/responsible-use-ai/guide-use-generative-ai.html" target="_blank">Guide on the use of Generative AI</a>. 
All AIâ€‘assisted outputs are reviewed by humans before operational use.</p>
</div>
</section>
<section id="support">
<h2 aria-level="2" role="heading">7) Support &amp; links</h2>
<p>
<ul>
<li><a href="https://github.com/cfs-wips/fwi25-tools/issues" target="_blank">Report issues </a><br/></li>
<li><a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/" target="_blank">CFFDRS ng repo </a><br/></li>
<li><a href="https://cffdrs.github.io/website_en/" target="_blank">NG CFFDRS FWI25 website</a><br/></li>
</ul>
</p>
</section>

<section id="references">
<h2 aria-level="2" role="heading">8) References</h2>
<ul>
  <li><a href="https://doi.org/10.1139/x89-120" target="_blank">Beck, T.A., &amp; Trevitt, A.C. (1989). Modelling diurnal variation in weather variables for fire danger rating. <em>Canadian Journal of Forest Research</em>.</a></li>
<li><a = href="https://doi.org/10.4095/st000101" target="_blank">Canadian Forest Service Fire Danger Group &amp; Groupe de travail sur les dangers d'incendies (2025). The 2025 Update to the FWI System: Structure, Changes and Interpretation. Information Report (GLFC - Sault Ste. Marie), GLC-X-42, 59. Natural Resources Canada.</a>
</ul>
</section>
</main>
</body>
</html>

