<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>FWI25 â€¢ Canadian Forest Fire Weather Index (hourly) â€” Help</title>
<link rel="stylesheet" href="gc_custom_style.css">
<style>
  body { background-color: #f7f9fa; font-family: var(--gcds-font-families-body); }
  main { max-width: 960px; margin: 0 auto; padding: 1.5rem; }
  h2 { color: var(--gcds-bg-primary); margin-top: 2rem; font-family: var(--gcds-font-families-heading); }
  h3 { color: var(--gcds-link-default); margin-top: 1.25rem; }
  .toc { background: #fff; border: 1px solid var(--gcds-border-default); padding: .75rem 1rem; border-radius: .5rem; }
  .gc-card { background: #fff; border: 1px solid var(--gcds-border-default); padding: 1rem; border-radius: .5rem; margin-bottom: 1rem; transition: box-shadow 0.3s ease; }
  .gc-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
  .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1rem; }
  table.coeff { width:100%; border-collapse: collapse; margin-top:.5rem; }
  table.coeff th, table.coeff td { border:1px solid var(--gcds-border-default); padding:.35rem; text-align:left; }
  table.coeff th { background: var(--gcds-bg-light); }
  svg { width: 100%; height: auto; }
 /* Inline icon + label row */
  .output-heading {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;                      /* space between icon and text */
    font-size: 1rem;
    margin-bottom: 0.35rem;
  }
  .output-heading .icon {
    font-size: 1.2rem;
    line-height: 1;
    color: var(--gcds-bg-primary, #26374A);  /* GC primary as fallback */
  }
  /* Optional: ensure the paragraph sits nicely below the heading row */
  .gc-card p {
    margin-top: 0.25rem;
    margin-bottom: 0;
  }
</style>
</head>
<body>
<header>
  <h1 class="gc-page-title">FWI25 â€¢ Canadian Forest Fire Weather Index (hourly)</h1>
  <p class="muted">Help & user guide â€” compute hourly FWI (FWI25) from your weather data</p>
</header>
<main>


<nav class="toc" aria-label="Table of contents">
  <strong>On this page</strong>
  <ol>
    <li><a href=#overview>Overview, purpose & assumptions</a></li>
    <li><a href=#workflow>Workflow: steps & outputs</a></li>
    <li><a href=#process>Process</a></li>
    <li><a href=#models>Modelling details & assumptions</a></li>
    <li><a href=#diagram>Process Diagram</a></li>
    <li><a href=#policy>TBS & Copilot statement</a></li>
    <li><a href=#support>Support & links</a></li>
    <li><a href=#references>References</a></li>
  </ol>
</nav>



<section id="overview">
<h2>1) Overview, purpose & assumptions</h2>
<div class="gc-card">
<p><strong>FWI25</strong> converts your weather data into <em>hourly</em> Canadian Forest Fire Weather Index values to support operational tables, plots, and downstream analytics. Upload a CSV, configure options, and run the hourly engine; the app returns FWI25 outputs and (optionally) daily FWI87 summaries.</p>
<h3>What the app can and cannot do</h3>
<ul>
<li>Accepts either <strong>hourly</strong> weather or <strong>daily (noon/1200)</strong> weather. If you provide daily, we statistically derive min/max values and then synthesize an hourly series before computing FWI25.</li>
<li>Respects your <strong>time policy</strong>: civil (DST-aware) vs a fixed standard offset; this affects timestamps shown in tables, plot axes, and solar terms.</li>
<li>Provides mapping, timezone/DST options, filters, and initial codes; previous results are hidden until you press <em>Run HFWI</em> after each upload.</li>
</ul>
<h3>Limitations</h3>
<ul>
<li>Assumes hourly granularity once converted; sub-hourly inputs are aggregated/ignored upstream.</li>
<li>Solar calculations depend on latitude/longitude quality and your chosen time policy (DST vs standard).</li>
</ul>
</div>
</section>

<section id="workflow">
<h2>2) Workflow: steps & outputs</h2>
<h3>Steps</h3>
<div class="grid">
<div class="gc-card"><h3>Upload & Map</h3><p>Upload a CSV and map required fields. Optional: station ID and lat/lon for timezone inference.</p></div>
<div class="gc-card"><h3>Options</h3><p>Select timezone/DST policy, apply filters, and set initial codes.</p></div>
<div class="gc-card"><h3>Run HFWI</h3><p>Press <em>Run HFWI</em> to compute hourly FWI25. New uploads reset prior results.</p></div>
</div>

<h3>Outputs</h3>
<div class="grid">
  <div class="gc-card">
    <div class="output-heading">
      <span class="icon" aria-hidden="true">ğŸ“¥</span>
      <strong>Input Table</strong>
      <span class="icon" aria-hidden="true">ğŸ“¥</span>
    </div>
    <p>Shows mapped weather data.</p>
  </div>

  <div class="gc-card">
    <div class="output-heading">
      <span class="icon" aria-hidden="true">ğŸ“Š</span>
      <strong>Output Table</strong>
      <span class="icon" aria-hidden="true">ğŸ“Š</span>
    </div>
    <p>Hourly FWI25 values and optional daily FWI87 summary.</p>
  </div>

  <div class="gc-card">
    <div class="output-heading">
      <span class="icon" aria-hidden="true">ğŸ“ˆ</span>
      <strong>Plots</strong>
      <span class="icon" aria-hidden="true">ğŸ“ˆ</span>
    </div>
    <p>Visualize hourly codes and indices.</p>
  </div>

  <div class="gc-card">
    <div class="output-heading">
      <span class="icon" aria-hidden="true">ğŸ“</span>
      <strong>Logs</strong>
      <span class="icon" aria-hidden="true">ğŸ“</span>
    </div>
    <p>Process messages and any warnings.</p>
  </div>
</div>

</section>

<section id="process">
<h2>3) Process: upload â†’ map â†’ options â†’ run â†’ results</h2>
<div class="gc-card">
<p><strong>Two paths:</strong> Hourly input computes FWI25 directly. Daily input estimates min/max values, then synthesizes hourly series via Becks & Trevitt before computing FWI25.</p>
</div>
</section>

<section id="models">
<h2>4) Dailyâ†’hourly modelling details & assumptions</h2>
<div class="gc-card">
<h3>4.1 Daily â†’ Min/Max (statistical model)</h3>
<p>When provided only with daily noon values (<code>temp</code>, <code>rh</code>, <code>ws</code>, <code>prec</code>), we compute a temperature range <code>temp_range = 17 âˆ’ 0.16Â·RH_noon + 0.22Â·T_noon</code>. The daily maxima/minima are then: <code>T_max = T_noon + {1 if temp_range â‰¤ 2 else 2}</code>, and <code>T_min = (T_noon âˆ’ 1) if temp_range â‰¤ 2 else (T_max âˆ’ temp_range)</code>.</p>
<p>Relative humidity extrema are paired so that minimum RH coincides with maximum temperature and viceâ€‘versa, using a parameter <code>q</code> derived from noon conditions and a function <code>find_rh(q, T)</code>, bounded to 0â€“100%. Wind extrema are estimated as <code>WS_min = 0.15Â·WS_noon</code> and <code>WS_max = 1.25Â·WS_noon</code>.</p>
<p class="muted small">Note: <code>find_q</code> and <code>find_rh</code> are implemented in the appâ€™s utility code; they relate noon conditions to the diurnal humidity curve.</p>

<h3>4.2 Min/Max â†’ Hourly (Becks & Trevitt synthesis)</h3>
<p>The hourly profiles of temperature, wind, and humidity are generated using a twoâ€‘phase curve per day: a <em>rising</em> phase from shortly after sunrise to near solar noon, followed by a <em>falling</em> phase from sunset toward the next dayâ€™s minimum.</p>
<ul>
<li><strong>Solar timing:</strong> Solar noon is set as the midpoint between sunrise and sunset per day; sunrise and sunset come from the appâ€™s solar routine.</li>
<li><strong>Coefficients (default):</strong>
<ul>
<li>Temperature: Î± = 0.0, Î² = 2.75, Î³ = âˆ’1.9</li>
<li>Relative humidity (opposite form): Î± = 0.25, Î² = 2.75, Î³ = âˆ’2.0</li>
<li>Wind: Î± = 1.0, Î² = 1.5, Î³ = âˆ’1.3</li>
</ul>
</li>
<li><strong>Rising phase (daytime):</strong> values progress from min toward max using a sine halfâ€‘wave scaled between <code>TIME_MIN = SUNRISE + Î±</code> and <code>TIME_MAX = SOLARNOON + Î²</code>.</li>
<li><strong>Falling phase (eveningâ€“night):</strong> values decay exponentially from the value at <code>change_at = SUNSET</code> toward the next dayâ€™s minimum using Î³.</li>
<li><strong>Humidity form:</strong> the model operates on <code>RH_OPP = 1 âˆ’ RH_fraction</code>, then converts back to percent RH (0â€“100%).</li>
<li><strong>Precipitation allocation:</strong> daily precipitation is placed at <code>07:00</code> local time by default.</li>
<li><strong>Timezone policy:</strong> timestamps use your selected civil/DST or fixed standard offset policy; plotting and tables reflect that choice.</li>
</ul>
</div>
</section>

<section id="diagram">
<h2>5) Process flow (vertical diagram)</h2>
<figure>

<svg viewBox="0 0 600 800" role="img" aria-labelledby="title desc">
<title id="title">FWI25 process flow</title>
<desc id="desc">Vertical branched flow showing hourly and daily paths merging before results, with optional FWI87 calculation.</desc>
<style><![CDATA[
  .box { fill:#fff; stroke:#7D828B; stroke-width:1.5; rx:6; }
  .hourly { fill:#e6f4ea; }
  .daily { fill:#eaf0f8; }
  .merge { fill:#f9f9f9; }
  .optional { fill:#f0f0f0; stroke-dasharray:4; }
  .label { font:14px sans-serif; fill:#333; }
  .arrow { stroke:#333; stroke-width:1.5; marker-end:url(#arrowhead); }
]]></style>
<defs>
  <marker id="arrowhead" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="8" markerHeight="8" orient="auto" markerUnits="strokeWidth">
    <path d="M0,0 L10,5 L0,10 Z" fill="#333" />
  </marker>
</defs>

<!-- Legend -->
<rect x="20" y="10" width="20" height="20" class="hourly" stroke="#7D828B"/><text x="50" y="25" class="label">Hourly path</text>
<rect x="180" y="10" width="20" height="20" class="daily" stroke="#7D828B"/><text x="210" y="25" class="label">Daily path</text>
<rect x="340" y="10" width="20" height="20" class="merge" stroke="#7D828B"/><text x="370" y="25" class="label">Merge</text>
<rect x="480" y="10" width="20" height="20" class="optional" stroke="#7D828B"/><text x="510" y="25" class="label">Optional</text>

<!-- Flow -->
<!-- Upload -->
<rect class="box merge" x="200" y="60" width="200" height="50"><title>Upload your CSV file</title></rect>
<text class="label" x="220" y="90">Upload CSV</text>
<line class="arrow" x1="300" y1="110" x2="300" y2="160" />

<!-- Map & Options -->
<rect class="box merge" x="200" y="160" width="200" height="50"><title>Map columns and set options</title></rect>
<text class="label" x="210" y="190">Map Columns & Options</text>
<line class="arrow" x1="300" y1="210" x2="300" y2="260" />

<!-- Branch -->
<line class="arrow" x1="300" y1="260" x2="150" y2="320" />
<line class="arrow" x1="300" y1="260" x2="450" y2="320" />

<!-- Hourly path -->
<rect class="box hourly" x="100" y="320" width="150" height="50"><title>Hourly weather input</title></rect>
<text class="label" x="110" y="350">Hourly weather</text>
<line class="arrow" x1="175" y1="370" x2="300" y2="620" />

<!-- Daily path -->
<rect class="box daily" x="400" y="320" width="150" height="50"><title>Daily weather input</title></rect>
<text class="label" x="410" y="350">Daily weather</text>
<line class="arrow" x1="475" y1="370" x2="475" y2="420" />
<rect class="box daily" x="400" y="420" width="150" height="50"><title>Convert daily to min/max</title></rect>
<text class="label" x="410" y="450">Statistical min/max</text>
<line class="arrow" x1="475" y1="470" x2="475" y2="520" />
<rect class="box daily" x="400" y="520" width="150" height="50"><title>Synthesize hourly using Becks & Trevitt</title></rect>
<text class="label" x="410" y="550">Becks & Trevitt hourly</text>
<line class="arrow" x1="475" y1="570" x2="300" y2="620" />

<!-- Merge -->
<rect class="box merge" x="200" y="620" width="200" height="50"><title>Run the hourly FWI engine</title></rect>
<text class="label" x="220" y="650">Run HFWI</text>

<!-- Optional FWI87 -->
<rect class="box optional" x="420" y="620" width="180" height="50"><title>Compute daily FWI87 summary</title></rect>
<text class="label" x="430" y="650">Optional: Calculate FWI87</text>
<line class="arrow" x1="420" y1="645" x2="400" y2="645" />

<!-- Results -->
<line class="arrow" x1="300" y1="670" x2="300" y2="720"/>
<rect class="box merge" x="200" y="720" width="200" height="50"><title>View results: tables, plots, logs</title></rect>
<text class="label" x="220" y="750">Results</text>
</svg>
</figure>
</section>

<section id="policy">
<h2>6) TBS & Copilot statement</h2>
<div class="gc-card">
<p>This app may use Microsoft Copilot to assist with translation and code generation. 
Use follows the Government of Canadaâ€™s <a href="https://www.tbs-sct.canada.ca/pol/doc-eng.aspx?id=32592">
Directive on Automated Decisionâ€‘Making</a> and the <a href="https://www.canada.ca/en/government/system/digital-government/digital-government-innovations/responsible-use-ai/guide-use-generative-ai.html" target="_blank">Guide on the use of Generative AI</a>. 
All AIâ€‘assisted outputs are reviewed by humans before operational use.</p>
</div>
</section>

<section id="support">
<h2>7) Support & links</h2>
<p>
â€¢ Report issues: <a href="https://github.com/cfs-wips/fwi25-tools/issues" target="_blank"></a><br/>
â€¢ CFFDRS ng repo: <a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/" target="_blank"></a><br/>
â€¢ NG CFFDRS FWI25 website <a href="https://cffdrs.github.io/website_en/" target="_blank"></a><br/>
</p>
</section>

<section id="references">
<h2>8) References</h2>
<ul>
<li>Becks, T.A., & Trevitt, A.C. (1989). Modelling diurnal variation in weather variables for fire danger rating. <em>Canadian Journal of Forest Research</em>.</li>
<li>CFFDRS documentation: <a href="https://cffdrs.github.io/website_en/" target="_</li>
</ul>
</section>
</main>
</body>
</html>
